!function(){function t(t,n){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var o,r,i,a,l=[],c=!0,u=!1;try{if(i=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;c=!1}else for(;!(c=(o=i.call(n)).done)&&(l.push(o.value),l.length!==e);c=!0);}catch(t){u=!0,r=t}finally{try{if(!c&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(u)throw r}}return l}}(t,n)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var o={}.toString.call(t).slice(8,-1);return"Object"===o&&t.constructor&&(o=t.constructor.name),"Map"===o||"Set"===o?Array.from(t):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?e(t,n):void 0}}(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function e(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,o=Array(e);n<e;n++)o[n]=t[n];return o}System.register(["./vendor-legacy.ddc66af0.js","./common-legacy.051f759c.js","./libs-legacy.774d107d.js","./components-legacy.c33fa5cb.js"],(function(e,n){"use strict";var o,r,i,a,l,c,u,s,p,m,f,d;return{setters:[function(t){o=t.n,r=t.K,i=t.d,a=t.x,l=t.i,c=t.o,u=t.l,s=t.J},function(t){p=t.s,m=t.T,f=t.t,d=t.q},null,null],execute:function(){var n=document.createElement("style");n.textContent=".template-contextmenu{background-color:#fff;border:1px solid #e4e7ed;border-radius:4px;box-shadow:0 2px 12px rgba(0,0,0,.1);left:0;margin:0;padding:0;position:absolute;top:0;visibility:hidden;width:98px;z-index:999}.template-contextmenu.visible{visibility:visible}.template-contextmenu-item{display:block;line-height:34px;overflow:hidden;padding:0 20px;text-overflow:ellipsis;white-space:nowrap}.template-contextmenu-item:hover{background-color:var(--color-primary-light-9)}\n",document.head.appendChild(n);var v=function(){var t=this,e=t._self._c;return e("nav",{staticClass:"template-contextmenu",class:{visible:t.visible},style:t.wrapperStyle,on:{pointerdown:function(e){return e.stopPropagation(),t.noop.apply(null,arguments)}}},[t.currentComponent?[e("a",{staticClass:"template-contextmenu-item",attrs:{href:"javascript:;"},on:{pointerdown:function(e){return t.command("del")}}},[t._v("删除")]),t.current.lock?e("a",{staticClass:"template-contextmenu-item",attrs:{href:"javascript:;"},on:{pointerdown:function(e){return t.command("unlock")}}},[t._v("取消锁定")]):e("a",{staticClass:"template-contextmenu-item",attrs:{href:"javascript:;"},on:{pointerdown:function(e){return t.command("lock")}}},[t._v("锁定")]),e("a",{staticClass:"template-contextmenu-item",attrs:{href:"javascript:;"},on:{pointerdown:function(e){return t.command("toTop")}}},[t._v("置于上层")]),e("a",{staticClass:"template-contextmenu-item",attrs:{href:"javascript:;"},on:{pointerdown:function(e){return t.command("toBottom")}}},[t._v("置于下层")])]:e("a",{staticClass:"template-contextmenu-item",attrs:{href:"javascript:;"},on:{pointerdown:function(e){return t.command("toPaste")}}},[t._v("粘贴")])],2)},h={del:function(){var t=new m(f.componentDel,{detail:this,target:"stage"});s.$emit(f.componentDel,t)},lock:function(){this.props.lock=!0},unlock:function(){this.props.lock=!1},toTop:function(){this.props.zIndex+=1},toBottom:function(){this.props.zIndex-=1},toPaste:function(){}};e("default",o({name:"TemplateContextmenu",props:{scale:{type:Number,default:1}},setup:function(e){var n=r("stageInstance"),o=r(p),s=i(!1),m=a({x:0,y:0}),f=l((function(){return o.currentComponent})),v=l((function(){return f.value?f.value.props:null})),h=function(o){o.preventDefault();var r=e.scale/100,i=t(d({x:o.pageX,y:o.pageY,el:n.$el},r),2),a=i[0],l=i[1];m.x=a,m.y=l,s.value=!0},x=function(t){s.value=!1};return c((function(){n.$el.addEventListener("contextmenu",h),window.addEventListener("pointerdown",x)})),u((function(){n.$el.removeEventListener("contextmenu",h),window.removeEventListener("pointerdown",x)})),{visible:s,position:m,currentComponent:f,current:v}},computed:{wrapperStyle:function(){return{left:this.position.x+"px",top:this.position.y+"px"}}},methods:{command:function(t){h[t].apply(this.currentComponent),this.visible=!1}}},v,[],!1,null,null,null,null).exports)}}}))}();
//# sourceMappingURL=template-contextmenu-legacy.57426272.js.map
