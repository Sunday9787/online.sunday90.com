{"version":3,"file":"organization.b002dea5.js","sources":["../../../src/views/organization/index.vue?chunkName=organization"],"sourcesContent":["<template>\n  <app-page>\n    <app-card>\n      <app-form-collapse>\n        <el-form ref=\"sample\" inline :model=\"form\" size=\"small\" label-width=\"80px\">\n          <el-form-item label=\"样本编号\" prop=\"patientNo\">\n            <el-input v-model=\"form.patientNo\" @input=\"search()\" />\n          </el-form-item>\n          <el-form-item label=\"上传时间\" prop=\"startTime\">\n            <el-date-picker\n              type=\"daterange\"\n              v-model=\"uploadTime\"\n              start-placeholder=\"开始日期\"\n              end-placeholder=\"结束日期\"\n              @change=\"search()\"\n            />\n          </el-form-item>\n          <el-form-item label=\"会诊状态\" prop=\"hasExpertPatient\">\n            <el-select v-model=\"form.hasExpertPatient\" default-first-option @change=\"search()\">\n              <el-option\n                v-for=\"item in expertPatientOptions\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\"\n              />\n            </el-select>\n          </el-form-item>\n          <el-form-item label=\"转交状态\" prop=\"transferStatus\">\n            <el-select v-model=\"form.transferStatus\" default-first-option>\n              <el-option\n                v-for=\"item in transferPatientOptions\"\n                :key=\"item.value\"\n                :label=\"item.label\"\n                :value=\"item.value\"\n              />\n            </el-select>\n          </el-form-item>\n        </el-form>\n        <el-button slot=\"action\" size=\"small\" @click=\"resetForm('sample')\">重置</el-button>\n      </app-form-collapse>\n    </app-card>\n\n    <app-data-view pagination>\n      <app-table-container>\n        <template slot=\"action\">\n          <el-button size=\"small\" type=\"primary\">导出LIS</el-button>\n          <el-button size=\"small\" type=\"primary\">导出EXCEL</el-button>\n          <el-button size=\"small\" type=\"primary\" @click=\"exposePDF()\">导出PDF</el-button>\n        </template>\n\n        <el-table ref=\"table\" :data=\"table.data\" v-loading=\"table.loading\" height=\"100%\" stripe>\n          <template v-for=\"head in tableHead\">\n            <el-table-column :key=\"head.prop\" v-bind=\"head\" v-if=\"head.on || !head.prop\">\n              <app-table-widget\n                slot=\"header\"\n                storage-key=\"online-organization\"\n                :data=\"tableHead\"\n                :text=\"head.label\"\n                v-if=\"!head.prop\"\n              />\n            </el-table-column>\n          </template>\n        </el-table>\n      </app-table-container>\n    </app-data-view>\n  </app-page>\n</template>\n\n<script>\nimport moment from 'moment'\nimport { reactive } from 'vue'\nimport * as format from '@/utils/format'\nimport { request } from '@/utils/net'\nimport pageMixin from '@/mixins/page'\n\nfunction getData(param) {\n  console.log(param)\n  return request(\n    Array.from({ length: param.length || 20 }, (v, k) => ({\n      date: moment().format('YYYY-MM-DD'),\n      name: '王小虎',\n      address: `上海市普陀区金沙江路 151${k} 弄`\n    }))\n  )\n}\n\nfunction useForm() {\n  const form = reactive({\n    mechanismId: '',\n    /** 样本编号 */\n    patientNo: '',\n    /** 上传时间 */\n    startTime: '',\n    endTime: '',\n    /** 会诊状态 0 | 1 */\n    hasExpertPatient: 0,\n    /** 是否转交 0 | 1 */\n    hasTransferPatient: 0,\n    /** 转交状态 */\n    transferStatus: -1\n  })\n\n  const expertPatientOptions = Object.freeze([\n    { label: '全部', value: -1 },\n    { label: '是', value: 1 },\n    { label: '否', value: 0 }\n  ])\n\n  const transferPatientOptions = Object.freeze([\n    { label: '全部', value: -1 },\n    { label: '是', value: 1 },\n    { label: '否', value: 0 }\n  ])\n\n  return { form, expertPatientOptions, transferPatientOptions }\n}\n\nexport default {\n  name: 'OrganizationIndex',\n  mixins: [\n    pageMixin({\n      immediate: false,\n      request: getData,\n      timeFieldMap: {\n        uploadTime: ['startTime', 'endTime']\n      }\n    })\n  ],\n  filters: {\n    /**\n     * @param {string} size\n     * @param {string} unit\n     */\n    formatByte(size, unit) {\n      if (unit) {\n        return format.byte(size).format(unit)\n      }\n\n      return '-'\n    }\n  },\n  setup() {\n    const { form, expertPatientOptions, transferPatientOptions } = useForm()\n\n    return {\n      form,\n      expertPatientOptions,\n      transferPatientOptions\n    }\n  },\n  data() {\n    return {\n      tableHead: [\n        {\n          on: true,\n          required: true,\n          label: '姓名',\n          prop: 'name',\n          width: '380'\n        },\n        {\n          on: true,\n          required: true,\n          label: '姓名名',\n          prop: 'named',\n          width: '380'\n        },\n        {\n          on: true,\n          label: '地址',\n          prop: 'address',\n          width: '380'\n        },\n        {\n          on: true,\n          fixed: true,\n          label: '日期',\n          prop: 'date',\n          width: '180'\n        },\n        {\n          label: '设置',\n          fixed: 'right',\n          width: '150'\n        }\n      ]\n    }\n  },\n  created() {\n    this.form.mechanismId = this.currentMechanism.mechanismId\n    this.search()\n  },\n  methods: {\n    exposePDF() {\n      console.log('123')\n    }\n  }\n}\n</script>\n"],"names":["name","mixins","pageMixin","immediate","request","param","console","log","Array","from","length","v","k","date","moment","format","address","concat","timeFieldMap","uploadTime","filters","formatByte","size","unit","format.byte","setup","form","expertPatientOptions","transferPatientOptions","reactive","mechanismId","patientNo","startTime","endTime","hasExpertPatient","hasTransferPatient","transferStatus","Object","freeze","label","value","data","tableHead","on","required","prop","width","fixed","created","this","currentMechanism","search","methods","exposePDF"],"mappings":"iHAqHA,CACAA,KAAA,oBACAC,OAAA,CACAC,EAAA,CACAC,WAAA,EACAC,QA/CA,SAAAC,GAEA,OADAC,QAAAC,IAAAF,GACAD,EACAI,MAAAC,KAAA,CAAAC,OAAAL,EAAAK,QAAA,KAAA,CAAAC,EAAAC,KAAA,CACAC,KAAAC,IAAAC,OAAA,cACAf,KAAA,MACAgB,QAAA,iBAAAC,OAAAL,EAAA,UAGA,EAuCAM,aAAA,CACAC,WAAA,CAAA,YAAA,eAIAC,QAAA,CAKAC,WAAA,CAAAC,EAAAC,IACAA,EACAC,EAAAF,GAAAP,OAAAQ,GAGA,KAGA,KAAAE,GACA,MAAAC,KAAAA,EAAAC,qBAAAA,EAAAC,uBAAAA,GA5BA,CAAAF,KA3BAG,EAAA,CACAC,YAAA,GAEAC,UAAA,GAEAC,UAAA,GACAC,QAAA,GAEAC,iBAAA,EAEAC,mBAAA,EAEAC,gBAAA,IAeAT,qBAZAU,OAAAC,OAAA,CACA,CAAAC,MAAA,KAAAC,OAAA,GACA,CAAAD,MAAA,IAAAC,MAAA,GACA,CAAAD,MAAA,IAAAC,MAAA,KASAZ,uBANAS,OAAAC,OAAA,CACA,CAAAC,MAAA,KAAAC,OAAA,GACA,CAAAD,MAAA,IAAAC,MAAA,GACA,CAAAD,MAAA,IAAAC,MAAA,MAiCA,MAAA,CACAd,OACAC,uBACAC,yBAEA,EACAa,KAAA,KACA,CACAC,UAAA,CACA,CACAC,IAAA,EACAC,UAAA,EACAL,MAAA,KACAM,KAAA,OACAC,MAAA,OAEA,CACAH,IAAA,EACAC,UAAA,EACAL,MAAA,MACAM,KAAA,QACAC,MAAA,OAEA,CACAH,IAAA,EACAJ,MAAA,KACAM,KAAA,UACAC,MAAA,OAEA,CACAH,IAAA,EACAI,OAAA,EACAR,MAAA,KACAM,KAAA,OACAC,MAAA,OAEA,CACAP,MAAA,KACAQ,MAAA,QACAD,MAAA,UAKA,OAAAE,GACAC,KAAAvB,KAAAI,YAAAmB,KAAAC,iBAAApB,YACAmB,KAAAE,QACA,EACAC,QAAA,CACA,SAAAC,GACA/C,QAAAC,IAAA,MACA"}