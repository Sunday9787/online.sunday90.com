{"version":3,"file":"index.2c1b825c.js","sources":["../../../src/views/three/images/block.jpg","../../../src/views/three/game/game.js","../../../src/views/three/images/block_active.jpg","../../../src/views/three/game/index.vue"],"sourcesContent":["export default \"__VITE_ASSET__0757bdb8__\"","import * as THREE from 'three'\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls'\nimport bg from '../images/block.jpg'\nimport bgActive from '../images/block_active.jpg'\n\nconst map = [\n  { y: 0, x: 0 },\n  { y: 0, x: 1 },\n  { y: 0, x: 2 },\n  { y: 0, x: 5 },\n  { y: 0, x: 6 },\n  { y: 0, x: 7 },\n  { y: 0, x: 8 },\n\n  { y: 1, x: 2 },\n  { y: 1, x: 8 },\n\n  { y: 2, x: 0 },\n  { y: 2, x: 1 },\n  { y: 2, x: 2 },\n  { y: 2, x: 3 },\n  { y: 2, x: 6 },\n  { y: 2, x: 7 },\n  { y: 2, x: 8 },\n  { y: 2, x: 10 },\n\n  { y: 3, x: 2 },\n  { y: 3, x: 3 },\n  { y: 3, x: 7 },\n  { y: 3, x: 10 },\n\n  { y: 4, x: 2 },\n  { y: 4, x: 3 },\n  { y: 4, x: 6 },\n  { y: 4, x: 7 },\n  { y: 4, x: 8 },\n  { y: 4, x: 9 },\n  { y: 4, x: 10 },\n  { y: 4, x: 11 },\n\n  { y: 5, x: 0 },\n  { y: 5, x: 1 },\n  { y: 5, x: 2 },\n  { y: 5, x: 3 },\n  { y: 5, x: 7 },\n  { y: 5, x: 10 },\n\n  { y: 6, x: 1 },\n  { y: 6, x: 4 },\n  { y: 6, x: 5 },\n  { y: 6, x: 6 },\n  { y: 6, x: 7 },\n  { y: 6, x: 9 },\n\n  { y: 7, x: 1 },\n  { y: 7, x: 5 },\n  { y: 7, x: 8 },\n  { y: 7, x: 9 },\n  { y: 7, x: 10 },\n  { y: 7, x: 11 },\n\n  { y: 8, x: 0 },\n  { y: 8, x: 1 },\n  { y: 8, x: 2 },\n  { y: 8, x: 3 },\n  { y: 8, x: 4 },\n  { y: 8, x: 5 },\n  { y: 8, x: 9 }\n]\n\nconst textureLoader = new THREE.TextureLoader()\n\nconst texture = textureLoader.load(bg)\nconst activeTexture = textureLoader.load(bgActive)\n\nclass GameBase {\n  /**\n   * @param {HTMLElement} container\n   * @param {number} width\n   * @param {number} height\n   */\n  constructor(container, width, height) {\n    /**\n     * @protected\n     */\n    this.map = map\n\n    /**\n     * @type {HTMLElement}\n     * @protected\n     */\n    this.container = container\n\n    /**\n     * @type {[number,number]}\n     * @protected\n     */\n    this.grid = [12, 9]\n\n    /**\n     * @type {number}\n     * @protected\n     */\n    this.size = 120\n\n    /**\n     * @type {number}\n     * @protected\n     */\n    this.width = width\n\n    /**\n     * @type {number}\n     * @protected\n     */\n    this.height = height\n\n    /**\n     * @type {THREE.Object3D[]}\n     * @protected\n     */\n    this.clickObjects = []\n\n    /**\n     * @protected\n     */\n    this.scene = null\n\n    /**\n     * @protected\n     */\n    this.camera = null\n\n    /**\n     * @protected\n     */\n    this.renderer = null\n\n    /**\n     * @protected\n     */\n    this.control = null\n\n    const [row, col] = this.grid\n    /**\n     * @type {THREE.Vector3}\n     * @protected\n     */\n    this.centerVector = new THREE.Vector3((row * this.size) / 2, 0, (col * this.size) / 2)\n  }\n\n  get row() {\n    return this.grid[0]\n  }\n\n  get col() {\n    return this.grid[1]\n  }\n\n  init() {\n    const context = this\n\n    const raycaster = new THREE.Raycaster()\n    const mouse = new THREE.Vector2()\n\n    this.initScene()\n    this.initCamera()\n    this.initLight()\n    this.initRenderer()\n    this.initHelper()\n    this.initControl()\n    this.initCanvas()\n\n    /**\n     * @private\n     */\n    this.resize = function () {\n      // 重置渲染器输出画布canvas尺寸\n      context.renderer.setSize(window.innerWidth, window.innerHeight)\n      // 全屏情况下：设置观察范围长宽比aspect为窗口宽高比\n      context.camera.aspect = window.innerWidth / window.innerHeight\n\n      context.control.update()\n      // 渲染器执行render方法的时候会读取相机对象的投影矩阵属性projectionMatrix\n      // 但是不会每渲染一帧，就通过相机的属性计算投影矩阵(节约计算资源)\n      // 如果相机的一些属性发生了变化，需要执行 updateProjectionMatrix()方法更新相机的投影矩阵\n      context.camera.updateProjectionMatrix()\n    }\n\n    /**\n     * @private\n     * @param {MouseEvent} e\n     */\n    this.pointerdown = function (e) {\n      e.preventDefault()\n      mouse.x = (e.clientX / context.renderer.domElement.clientWidth) * 2 - 1\n      mouse.y = -(e.clientY / context.renderer.domElement.clientHeight) * 2 + 1\n\n      raycaster.setFromCamera(mouse, context.camera)\n\n      // 总结一下，这里必须装网格，mesh，装入组是没有效果的\n      // 所以我们将所有的盒子的网格放入对象就可以了\n      // 需要被监听的对象要存储在clickObjects中。\n      const intersects = raycaster.intersectObjects(context.clickObjects)\n\n      // console.log(intersects)\n      if (intersects.length > 0) {\n        context.onPointDown(intersects[0].object)\n      }\n    }\n\n    this.container.addEventListener('pointerdown', this.pointerdown)\n    window.addEventListener('resize', this.resize)\n    window.dispatchEvent(new Event('resize'))\n  }\n\n  /**\n   * 创建相机\n   * @protected\n   */\n  initCamera() {\n    this.camera = new THREE.PerspectiveCamera(30, this.width / this.height, 0.1, 8000)\n    this.camera.position.set(800, 800, 800)\n    this.camera.lookAt(this.centerVector)\n  }\n\n  /**\n   * 创建场景\n   * @protected\n   */\n  initScene() {\n    this.scene = new THREE.Scene()\n  }\n\n  /**\n   * 创建坐标轴辅助线\n   * @protected\n   */\n  initHelper() {\n    const axesHelper = new THREE.AxesHelper(800)\n    this.scene.add(axesHelper)\n  }\n\n  /**\n   *\n   * @protected\n   */\n  initControl() {\n    const context = this\n    this.control = new OrbitControls(this.camera, this.renderer.domElement)\n    this.control.target.set(this.centerVector.x, this.centerVector.y, this.centerVector.z)\n\n    // controls 目标默认是 0 0 0 修改后需要手动更新\n    this.control.update()\n\n    /**\n     * @private\n     */\n    this.change = function () {\n      // OrbitControls 发生变化时 更新 渲染器\n      context.renderer.render(context.scene, context.camera)\n    }\n\n    this.control.addEventListener('change', this.change)\n  }\n\n  /**\n   * 创建渲染器\n   * @protected\n   */\n  initRenderer() {\n    const context = this\n\n    const bootstrap = function () {\n      context.renderer.render(context.scene, context.camera)\n    }\n\n    this.renderer = new THREE.WebGL1Renderer({ antialias: true })\n    this.renderer.setPixelRatio(window.devicePixelRatio)\n    this.renderer.setClearColor(0xd3e6fb, 1)\n\n    this.renderer.setAnimationLoop(bootstrap)\n    this.container.appendChild(this.renderer.domElement)\n  }\n\n  /**\n   * 创建光源\n   * @protected\n   */\n  initLight() {\n    // 创建光源\n    const pointLight = new THREE.PointLight(0xfff, 1)\n    pointLight.position.set(400, 0, 0)\n    this.scene.add(pointLight)\n  }\n\n  /**\n   * 开始绘制\n   * @abstract\n   * @protected\n   */\n  initCanvas() {}\n\n  /**\n   * 点击事件\n   * @abstract\n   * @protected\n   */\n  onPointDown() {}\n\n  destroy() {\n    window.removeEventListener('resize', this.resize)\n    this.container.removeEventListener('pointerdown', this.pointerdown)\n    this.control.removeEventListener('change', this.change)\n    this.control.dispose()\n    this.gui.destroy()\n    this.renderer.dispose()\n    this.scene.clear()\n  }\n}\n\n/**\n * @param {number} x\n * @param {number} y\n */\nfunction createObjectName(x, y) {\n  return `${x}-${y}`\n}\n\n/**\n * @param {string} name\n * @returns {[number, number]}\n */\nfunction objectNameToLocation(name) {\n  return name.split('-').map(item => Number(item))\n}\n\nexport default class Game extends GameBase {\n  tips = new Map([\n    ['21222324', '赫拉利将告诉你人类是如何从动物变成上帝'],\n    ['40414243', '对两次世界大战的哲学思考，直面存在的危机'],\n    ['81828384', '看萧红写的这书名还以为是一条河的历史'],\n    ['9091', '鲁迅先生的短篇小说集，里面有《狂人日记》'],\n    ['64656667', '天下合久必分，分久必合'],\n    ['46474849', '与达尔文《物种起源论》及哥白尼《天体运行论》并称为人类三大思想革命的经典之作'],\n    ['262728', '三位艺术天才的非凡人生，罗曼罗兰著'],\n    ['5678', '证明你上过中学的又一个有力佐证，冰心奶奶如是说'],\n    ['11121', '我们都是故事外的人——阿尔贝·加缪'],\n    ['13233343', '一种追求简单生活的价值观'],\n    ['415161718191', '余华手下一本关于记忆的长篇小说'],\n    ['647484', '走遍万水千山，泪尽撒哈拉'],\n    ['2737475767', '达康书记别低头，皇冠会掉'],\n    ['81828', '中国四大名著之一']\n  ])\n\n  /**\n   * @type {Array<THREE.Mesh>}\n   */\n  units = []\n\n  /**\n   * 空白材质\n   */\n  emptyMaterial = new THREE.MeshBasicMaterial({ color: 0xe3b35d, name: 'emptyUnitMaterial' })\n\n  /**\n   * 单元格材质\n   */\n  material = new THREE.MeshBasicMaterial({ map: texture, name: 'unitMaterial' })\n\n  /**\n   * 高亮单元格材质\n   */\n  activeMaterial = new THREE.MeshBasicMaterial({ map: activeTexture, name: 'activeUnitMaterial' })\n\n  /**\n   * @param {THREE.Object3D} unit\n   */\n  onPointDown(unit) {\n    if (unit.userData.empty) return\n\n    /**\n     * 重置\n     */\n    this.resetCollection(this.units, unit)\n\n    unit.userData.down = !unit.userData.down\n\n    /**\n     * @type {boolean}\n     */\n    const down = unit.userData.down\n    /**\n     * @type {boolean}\n     */\n    const selectRow = unit.userData.selectRow\n\n    console.log('selectRow', selectRow)\n    console.log('down', down)\n    /**\n     * @type {[number, number]}\n     */\n    const [x, y] = objectNameToLocation(unit.name)\n\n    const row = this.collectionUnit(x, y, true)\n    const col = this.collectionUnit(x, y, false)\n\n    if (down && selectRow) {\n      this.renderColCollection(x, y, [row, col])\n    } else {\n      this.renderRowCollection(x, y, [row, col])\n    }\n  }\n\n  /**\n   * 渲染 列\n   * 如果当前列内元素小于2个时 渲染行\n   * @param {number} x\n   * @param {number} y\n   * @param {[THREE.Mesh, THREE.Mesh]}\n   */\n  renderColCollection(x, y, [rowCollection, colCollection]) {\n    const aroundColUnit = this.aroundUnit(x, y, colCollection, false)\n\n    if (aroundColUnit.length < 2) {\n      this.renderRowCollection(x, y, [rowCollection, colCollection], true)\n      return\n    }\n\n    for (const item of aroundColUnit) {\n      item.userData.selectRow = false\n      item.material = this.activeMaterial\n    }\n  }\n\n  /**\n   * 渲染 行\n   * 如果当前行内元素小于2个时 渲染列\n   * @param {number} x\n   * @param {number} y\n   * @param {[THREE.Mesh, THREE.Mesh]}\n   */\n  renderRowCollection(x, y, [rowCollection, colCollection]) {\n    const aroundRowUnit = this.aroundUnit(x, y, rowCollection, true)\n\n    if (aroundRowUnit.length < 2) {\n      return this.renderColCollection(x, y, [rowCollection, colCollection], false)\n    }\n\n    for (const item of aroundRowUnit) {\n      item.userData.selectRow = true\n      item.material = this.activeMaterial\n    }\n  }\n\n  /**\n   * 重置为默认样式\n   * @param {Array<THREE.Mesh>} collection\n   * @param {THREE.Mesh} unit\n   */\n  resetCollection(collection, unit) {\n    const context = this\n\n    const data = collection.filter(function (item) {\n      return !item.userData.empty\n    })\n\n    for (const item of data) {\n      item.material = context.material\n      item.userData.down = false\n    }\n  }\n\n  /**\n   * 寻找 当前行或者列 单元格\n   * @param {number} x\n   * @param {number} y\n   * @param {boolean} row 行/列\n   */\n  collectionUnit(x, y, row) {\n    return this.units.filter(function (item) {\n      const [itemX, itemY] = objectNameToLocation(item.name)\n      return row ? itemY === y : itemX === x\n    })\n  }\n\n  /**\n   * 寻找 前后非空 单元格\n   * @param {number} x\n   * @param {number} y\n   * @param {Array<THREE.Object3D>} collection 当前行/列合集\n   * @param {boolean} row 是否选择行\n   */\n  aroundUnit(x, y, collection, row) {\n    /**\n     * @type {THREE.Mesh[]}\n     */\n    const result = []\n    const length = collection.length\n    const start = row ? x : y\n\n    for (let index = start; index < length; index++) {\n      const element = collection[index]\n      if (element && element.userData.empty) break\n      result.push(element)\n    }\n\n    for (let index = start - 1; index >= 0; index--) {\n      const element = collection[index]\n      if (element && element.userData.empty) break\n      result.push(element)\n    }\n\n    return result\n  }\n\n  /**\n   * @protected\n   */\n  initCanvas() {\n    // 创建几何\n    const geometry = new THREE.BoxGeometry(100, 100, 100)\n    const group = new THREE.Group()\n\n    const [row, col] = this.grid\n\n    // 创建矩阵\n    for (let x = 0; x < row; x++) {\n      for (let y = 0; y < col; y++) {\n        let mesh = new THREE.Mesh(geometry, this.emptyMaterial)\n\n        for (const item of this.map) {\n          if (item.x === x && item.y === y) {\n            mesh = new THREE.Mesh(geometry, this.material)\n            break\n          }\n        }\n\n        mesh.position.set(x * 120, 0, y * 120)\n        mesh.name = createObjectName(x, y)\n        mesh.userData.down = false\n        mesh.userData.selectRow = null\n\n        if (mesh.material.name === 'emptyUnitMaterial') {\n          mesh.userData.empty = true\n        }\n\n        this.clickObjects.push(mesh)\n        this.units.push(mesh)\n        group.add(mesh)\n      }\n    }\n\n    const centerGroup = new THREE.Group()\n    centerGroup.add(group)\n\n    group.position.set(-this.centerVector.x, 0, -this.centerVector.z)\n    centerGroup.position.set(this.centerVector.x, 0, this.centerVector.z)\n    this.scene.add(centerGroup)\n  }\n}\n","export default \"__VITE_ASSET__832477fd__\"","<template lang=\"pug\">\n.three-container\n</template>\n\n<script>\nimport Game from './game'\n\nexport default {\n  name: 'ThreeIndex',\n  mounted() {\n    const game = new Game(this.$el, window.innerWidth, window.innerHeight)\n\n    game.init()\n\n    this.$on('hook:beforeDestroy', function () {\n      game.destroy()\n    })\n  }\n}\n</script>\n\n<style lang=\"scss\">\n.three-container {\n  height: 100%;\n}\n</style>\n"],"names":["map","y","x","textureLoader","THREE.TextureLoader","texture","load","activeTexture","GameBase","constructor","container","width","height","this","grid","size","clickObjects","scene","camera","renderer","control","row","col","centerVector","THREE.Vector3","init","context","raycaster","THREE.Raycaster","mouse","THREE.Vector2","initScene","initCamera","initLight","initRenderer","initHelper","initControl","initCanvas","resize","setSize","window","innerWidth","innerHeight","aspect","update","updateProjectionMatrix","pointerdown","e","preventDefault","clientX","domElement","clientWidth","clientY","clientHeight","setFromCamera","intersects","intersectObjects","length","onPointDown","object","addEventListener","dispatchEvent","Event","THREE.PerspectiveCamera","position","set","lookAt","THREE.Scene","axesHelper","THREE.AxesHelper","add","OrbitControls","target","z","change","render","THREE.WebGL1Renderer","antialias","setPixelRatio","devicePixelRatio","setClearColor","setAnimationLoop","appendChild","pointLight","THREE.PointLight","destroy","removeEventListener","dispose","gui","clear","createObjectName","concat","objectNameToLocation","name","split","item","Number","Game","super","arguments","__publicField","Map","THREE.MeshBasicMaterial","color","unit","userData","empty","resetCollection","units","down","selectRow","console","log","collectionUnit","renderColCollection","renderRowCollection","rowCollection","colCollection","aroundColUnit","aroundUnit","material","activeMaterial","aroundRowUnit","collection","data","filter","itemX","itemY","result","start","index","element","push","geometry","THREE.BoxGeometry","group","THREE.Group","mesh","THREE.Mesh","emptyMaterial","centerGroup","mounted","game","$el","$on"],"mappings":"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"}