!function(){function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(t,r,o){return r=i(r),function(t,n){if(n&&("object"==e(n)||"function"==typeof n))return n;if(void 0!==n)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(t)}(t,n()?Reflect.construct(r,o||[],i(t).constructor):r.apply(t,o))}function n(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(n=function(){return!!e})()}function i(e){return i=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},i(e)}function r(e,t){return r=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},r(e,t)}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,c(i.key),i)}}function l(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function c(t){var n=function(t,n){if("object"!=e(t)||!t)return t;var i=t[Symbol.toPrimitive];if(void 0!==i){var r=i.call(t,n||"default");if("object"!=e(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(t)}(t,"string");return"symbol"==e(n)?n:n+""}System.register(["./vendor-legacy.ddc66af0.js","./libs-legacy.774d107d.js"],(function(e,n){"use strict";var i,a,c;return{setters:[function(e){i=e.n,a=e._},function(e){c=e.M}],execute:function(){var u=document.createElement("style");u.textContent='@charset "UTF-8";.good-container{display:flex;flex-direction:column;margin:0 auto;row-gap:12px;width:600px}.good-title{overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.good-spec{flex-direction:column;margin:0;padding:0;row-gap:12px}.good-spec,.good-spec__item{display:flex}.good-spec-title:after{content:"："}\n',document.head.appendChild(u);var s=c.mock({id:"@id",title:"@cword(48)",price:"@integer(1,100)","album|5":["@image(1200x1200, @color)"],specs:[{id:1,attr:"颜色",select:"",value:[{id:0,label:"红色"},{id:1,label:"绿色"},{id:2,label:"蓝色"},{id:3,label:"紫色"}],img:"@image(800x800, @color, @first)"},{id:2,attr:"尺码",select:"",value:[{id:0,label:"M"},{id:1,label:"L"},{id:2,label:"XL"}],img:"@image(800x800, @color, @first)"},{id:3,attr:"版型",select:"",value:[{id:0,label:"宽松"},{id:1,label:"紧致"}],img:"@image(800x800, @color, @first)"}]}),f=[{id:0,spec:[{id:1,label:"颜色",value:"红色"},{id:2,label:"尺码",value:"L"},{id:3,label:"版型",value:"紧致"}]},{id:1,spec:[{id:1,label:"颜色",value:"绿色"},{id:2,label:"尺码",value:"L"},{id:3,label:"版型",value:"紧致"}]},{id:3,spec:[{id:1,label:"颜色",value:"紫色"},{id:2,label:"尺码",value:"XL"},{id:3,label:"版型",value:"宽松"}]}];var p=function(){return l((function e(t){o(this,e),this.vertex=t,this.quantity=this.vertex.length,this.adjoinMatrix=new Map(Array(Math.pow(this.quantity,2)).fill(0).entries())}),[{key:"setAdjoinVertex",value:function(e,t){var n=this.vertex.indexOf(e),i=this;t.forEach((function(e){var t=i.vertex.indexOf(e);i.adjoinMatrix.set(n*i.quantity+t,1)}))}},{key:"getVertexCol",value:function(e){for(var t=this.vertex.indexOf(e),n=[],i=0;i<this.vertex.length;i++)n.push(this.adjoinMatrix.get(this.quantity*i+t));return n}},{key:"getColSum",value:function(e){for(var t=this,n=e.map((function(e){return t.getVertexCol(e)})),i=[],r=function(e){var t=n.map((function(t){return t[e]})).reduce((function(e,t){return e+t}),0);i.push(t)},o=0;o<this.vertex.length;o++)r(o);return i}},{key:"getCollection",value:function(e){var t=this,n=this.getColSum(e),i=[];return n.forEach((function(e,n){e&&t.vertex[n]&&i.push(t.vertex[n])})),i}},{key:"getUnions",value:function(e){var t=this,n=this.getColSum(e),i=[];return n.forEach((function(n,r){n>=e.length&&t.vertex[r]&&i.push(t.vertex[r])})),i}}])}(),d=function(e){function n(e,i){var r,a;return o(this,n),(r=t(this,n,[(a=e,a.reduce((function(e,t){return e.concat(t.value.map((function(e){return e.label})))}),[]))])).specList=e,r.specCombinationList=i,r.init(),r}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&r(e,t)}(n,e),l(n,[{key:"init",value:function(){this.initSpec()}},{key:"initSpec",value:function(){var e=this;this.specCombinationList.forEach((function(t){for(var n=t.spec.map((function(e){return e.value})),i=n[0],r=0;r<n.length;){var o=n.filter((function(e){return e!==i}));e.setAdjoinVertex(i,o),r++,i=n[r]}}))}},{key:"getSpecsOptions",value:function(e){return e.some(Boolean)?this.getUnions(e.filter(Boolean)):this.getCollection(this.vertex)}}])}(p);function v(e){var t=new Map;return e.forEach((function(e){var n=e.spec.map((function(e){return e.value})).join(",");t.set(n,e)})),t}e("default",i({name:"ProductBuy",props:{id:{type:Number,required:!0}},components:{specGroup:function(){return a((function(){return n.import("./spec-group-legacy.911acb52.js")}),void 0)},specItem:function(){return a((function(){return n.import("./spec-item-legacy.6fef92c4.js")}),void 0)}},data:function(){return{detail:s,specCombinationList:f,specCombinationMap:v(f),specMatrix:new d(s.specs,f)}},computed:{form:function(){var e=[];return this.detail.specs.forEach((function(t){t.select&&e.push(t.select)})),e},optionSpecs:function(){return this.specMatrix.getSpecsOptions(this.form)},currentSpec:function(){if(this.form.length){var e=this.form.join(",");return this.specCombinationMap.get(e)}return null}},mounted:function(){}},(function(){var e=this,t=e._self._c;return t("section",[t("app-card",[t("section",{staticClass:"good-container"},[t("keep-alive",[e.currentSpec?t("el-carousel",{key:"preview",attrs:{interval:5e3,height:"600px",arrow:"always"}},e._l(e.detail.specs,(function(e,n){return t("el-carousel-item",{key:n},[t("el-image",{staticStyle:{width:"100%",height:"600px"},attrs:{src:e.img,fit:"contain",alt:"图片"}})],1)})),1):t("el-carousel",{key:"album",attrs:{interval:5e3,height:"600px",arrow:"always"}},e._l(e.detail.album,(function(e,n){return t("el-carousel-item",{key:n},[t("el-image",{staticStyle:{width:"100%",height:"600px"},attrs:{src:e,fit:"contain",alt:"图片"}})],1)})),1)],1),t("div",{staticClass:"good-title"},[e._v(e._s(e.detail.title))]),t("ul",{staticClass:"good-spec"},e._l(e.detail.specs,(function(n){return t("li",{key:n.id,staticClass:"good-spec__item"},[t("label",{staticClass:"good-spec-title"},[e._v(e._s(n.attr))]),t("spec-group",{model:{value:n.select,callback:function(t){e.$set(n,"select",t)},expression:"item.select"}},e._l(n.value,(function(n){return t("spec-item",{key:n.id,attrs:{disabled:e.optionSpecs.indexOf(n.label)<0,label:n.label}},[e._v(e._s(n.label))])})),1)],1)})),0),t("div",[t("el-button",{staticClass:"fluid",attrs:{type:"primary"}},[e._v("购买")])],1)],1)]),t("app-card",[t("h3",[e._v("已选择")]),t("p",[e._v(e._s(e.currentSpec||"-"))])])],1)}),[],!1,null,null,null,null).exports)}}}))}();
//# sourceMappingURL=productBuy-legacy.3bb7d66b.js.map
