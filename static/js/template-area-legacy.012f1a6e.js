!function(){function e(e,n){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o,i,s=[],l=!0,c=!1;try{if(o=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;l=!1}else for(;!(l=(r=o.call(n)).done)&&(s.push(r.value),s.length!==t);l=!0);}catch(e){c=!0,a=e}finally{try{if(!l&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(c)throw a}}return s}}(e,n)||t(e,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){if(e){if("string"==typeof e)return n(e,t);var r={}.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}}function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}System.register(["./vendor-legacy.ddc66af0.js","./common-legacy.051f759c.js","./libs-legacy.774d107d.js","./components-legacy.c33fa5cb.js"],(function(n,r){"use strict";var a,o,i,s,l,c,u,f,h,g,p,y;return{setters:[function(e){a=e.n,o=e.g,i=e.K,s=e.d,l=e.x,c=e.o,u=e.J,f=e.l,h=e.t},function(e){g=e.s,p=e.t,y=e.A},null,null],execute:function(){var r=document.createElement("style");r.textContent=".template-area{position:absolute}\n",document.head.appendChild(r);n("default",a({name:"TemplateArea",inject:["stageInstance"],props:{scale:{type:Number,required:!0}},setup:function(n,r){var a=o().proxy,y=i(g),d=s(null),v=l({w:0,h:0,x:0,y:0}),m=new Map,w=function(e){if(!a.stageInstance.spaceDown){var t=n.scale/100,r=(e.pageX-a.stageRect.x)/t-a.offset.x,o=(e.pageY-a.stageRect.y)/t-a.offset.y;v.x=r,v.y=o,d.value={x:e.pageX,y:e.pageY}}},x=function(r){if(d.value){var a=n.scale/100,o=(r.pageX-d.value.x)/a,i=(r.pageY-d.value.y)/a;v.w=o,v.h=i;var s,l=function(e,n){var r="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!r){if(Array.isArray(e)||(r=t(e))||n&&e&&"number"==typeof e.length){r&&(e=r);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,l=!1;return{s:function(){r=r.call(e)},n:function(){var e=r.next();return s=e.done,e},e:function(e){l=!0,i=e},f:function(){try{s||null==r.return||r.return()}finally{if(l)throw i}}}}(y.components);try{for(l.s();!(s=l.n()).done;){var c=e(s.value,2)[1];c.props.position.x>=v.x&&c.props.position.x<=v.x+v.w&&c.props.position.y>=v.y&&c.props.position.y<=v.y+v.h&&(m.has(c.uid)||m.set(c.uid,c))}}catch(u){l.e(u)}finally{l.f()}}},b=function(e){if(d.value=null,v.w=v.h=v.x=v.y=0,m.size){var t=Array.from(m.values());return r.emit("area",t),void m.clear()}r.emit("unArea")},$=function(e){h((function(){a.updateOffset(),a.updateRect()}))};return c((function(){u.$on(p.stageMove,$),u.$on(p.stagePaddingChange,$),u.$on(p.stageSizeChange,$),u.$on(p.stageScaleChange,$),u.$emit(p.stageSizeChange),a.stageInstance.$el.addEventListener("pointerdown",w),a.stageInstance.$el.addEventListener("pointermove",x),a.stageInstance.$el.addEventListener("pointerup",b)})),f((function(){u.$off(p.stageMove,$),u.$off(p.stagePaddingChange,$),u.$off(p.stageSizeChange,$),u.$off(p.stageScaleChange,$),a.stageInstance.$el.removeEventListener("pointerdown",w),a.stageInstance.$el.removeEventListener("pointermove",x),a.stageInstance.$el.removeEventListener("pointerup",b)})),{rect:v,stagePosition:d}},data:function(){return{stageRect:{x:0,y:0,w:0,h:0},offset:{x:0,y:0}}},computed:{rectStyle:function(){return{width:this.rect.w>=0?this.rect.w:0,height:this.rect.h>=0?this.rect.h:0,left:this.rect.x+"px",top:this.rect.y+"px"}}},methods:{updateOffset:function(){if(this.stageInstance.$el){var t=e(y(this.stageInstance.$el),2),n=t[0],r=t[1];this.offset={x:n,y:r}}else this.offset={x:0,y:0}},updateRect:function(){if(this.stageInstance.$el){var e=this.stageInstance.$el.getBoundingClientRect();this.stageRect={x:e.left,y:e.top,w:e.width,h:e.width}}else this.stageRect={x:0,y:0,w:0,h:0}}}},(function(){var e=this,t=e._self._c;return t("svg",{staticClass:"template-area",style:{left:e.rectStyle.left,top:e.rectStyle.top},attrs:{xmlns:"http://www.w3.org/2000/svg",width:e.rectStyle.width,height:e.rectStyle.height}},[t("rect",{attrs:{stroke:"var(--color-primary)",fill:"rgba(0, 0, 0, 0.1)","stroke-width":"1",height:"100%",width:"100%"}})])}),[],!1,null,null,null,null).exports)}}}))}();
//# sourceMappingURL=template-area-legacy.012f1a6e.js.map
